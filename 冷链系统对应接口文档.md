## 1.1. API V1 接口说明

- 接口地址：
- 服务端已开启 CORS 跨域支持
- API V1 认证统一使用 Token 认证
- 需要授权的 API ，必须在请求头中使用 `Authorization` 字段提供 `token` 令牌
- 使用 HTTP Status Code 标识状态
- 数据返回格式统一使用 JSON

### 1.1.1. 支持的请求方法

- GET（SELECT）：从服务器取出资源（一项或多项）。
- POST（CREATE）：在服务器新建一个资源。

### 1.1.2. 通用返回状态说明

| _状态码_ | _含义_                | _说明_                                              |
| -------- | --------------------- | --------------------------------------------------- |
| 200      | OK                    | 请求成功                                            |
| 201      | CREATED               | 创建成功                                            |
| 204      | DELETED               | 删除成功                                            |
| 400      | BAD REQUEST           | 请求的地址不存在或者包含不支持的参数                |
| 401      | UNAUTHORIZED          | 未授权                                              |
| 403      | FORBIDDEN             | 被禁止访问                                          |
| 404      | NOT FOUND             | 请求的资源不存在                                    |
| 422      | Unprocesable entity   | [POST/PUT/PATCH] 当创建一个对象时，发生一个验证错误 |
| 500      | INTERNAL SERVER ERROR | 内部错误                                            |
|          |                       |                                                     |

### 1.1.3. 基本功能概述

-

## 1.2.登录系统

### 1.2.1. 登录验证接口

- 请求路径：login
- 请求方法：post
- 请求参数

| 参数名   | 参数说明 | 备注     |
| -------- | -------- | -------- |
| username | 用户名   | 不能为空 |
| password | 密码     | 不能为空 |

- 响应参数

| 参数名   | 参数说明    | 备注            |
| -------- | ----------- | --------------- |
| id       | 用户 ID     |                 |
| rid      | 用户角色 ID |                 |
| name     | 名字        | 不能为空        |
| username | 用户名称    | 不能为空        |
| name     | 用户 ID     |                 |
| token    | 令牌        | 基于 jwt 的令牌 |

- 响应数据

```json
{
    "data": {
        "name":"张三"，
        "id": 500,
        "rid": 0,
        "username": "admin",
        "token": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOjUwMCwicmlkIjowLCJpYXQiOjE1MTI1NDQyOTksImV4cCI6MTUxMjYzMDY5OX0.eGrsrvwHm-tPsO9r_pxHIQ5i5L1kX9RX444uwnRGaIM"
    },
    "meta": {
        "msg": "登录成功",
        "status": 200
    }
}
```

### 1.2.2. 注册接口

- 请求路径：registeradmin
- 请求方法：post
- 请求参数

| 参数名   | 参数说明 | 备注     |
| -------- | -------- | -------- |
| username | 用户名   | 不能为空 |
| password | 密码     | 不能为空 |

- 响应参数

| 参数名   | 参数说明 | 备注     |
| -------- | -------- | -------- |
| username | 用户名   | 不能为空 |
| password | 密码     | 不能为空 |

- 响应数据

```json
,
    "meta": {
        "msg": "注册成功",
        "status": 200
    }
}
```

### 1.2.3. 忘记密码-手机验证码登录

- 请求路径：loginphone
- 请求方法：post
- 请求参数

| 参数名       | 参数说明 | 备注     |
| ------------ | -------- | -------- |
| phone        | 手机号   | 不能为空 |
| Verification | 验证码   | 不能为空 |

- 响应参数

| 参数名       | 参数说明 | 备注     |
| ------------ | -------- | -------- |
| phone        | 手机号   | 不能为空 |
| Verification | 验证码   | 不能为空 |

- 响应数据

```json
{
    "data": {
        "name":"张三"，
        "id": 500,
        "rid": 0,
        "username": "admin",
        "token": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOjUwMCwicmlkIjowLCJpYXQiOjE1MTI1NDQyOTksImV4cCI6MTUxMjYzMDY5OX0.eGrsrvwHm-tPsO9r_pxHIQ5i5L1kX9RX444uwnRGaIM"
    },
    "meta": {
        "msg": "登录成功",
        "status": 200
    }
}
```

## 1.3.首页数据可视化页面

- 请求路径：Welcome
- 请求方法：post
- 请求参数

| 参数名   | 参数说明                 | 备注     |
| -------- | ------------------------ | -------- |
| Data1_3  | 在线记录仪               | 不能为空 |
| Data1_4  | 记录仪总数               | 不能为空 |
| Data1_7  | 报警记录仪               | 不能为空 |
| Data1_8  | 记录仪总数               | 不能为空 |
| Data1_9  | 持续保存时间即将生效数据 | 不能为空 |
| Data1_10 | 记录仪总数               | 不能为空 |
| Data1_11 | 物流已经送达总数         | 不能为空 |
| Data1_12 | 物流总数                 | 不能为空 |

- 响应参数

| 参数名   | 参数说明                 | 备注     |
| -------- | ------------------------ | -------- |
| Data1_3  | 在线记录仪               | 不能为空 |
| Data1_4  | 记录仪总数               | 不能为空 |
| Data1_7  | 报警记录仪               | 不能为空 |
| Data1_8  | 记录仪总数               | 不能为空 |
| Data1_9  | 持续保存时间即将生效数据 | 不能为空 |
| Data1_10 | 记录仪总数               | 不能为空 |
| Data1_11 | 物流已经送达总数         | 不能为空 |
| Data1_12 | 物流总数                 | 不能为空 |

- 响应数据

```json
{
  "homedatas": {
    "Data1_3": "9",
    "Data1_4": "10",
    "Data1_7": "1",
    "Data1_8": "10",
    "Data1_9": "1",
    "Data1_10": "10",
    "Data1_11": "2",
    "Data1_12": "10"
  },
  "meta": {
    "msg": "数据导入成功成功",
    "status": 200
  }
}
```

## 1.4.运输管理

- 请求路径：Welcome
- 请求方法：post
- 请求参数

| 参数名   | 参数说明     | 备注     |
| -------- | ------------ | -------- |
| query    | 查询参数     | 可以为空 |
| query2   | 查询状态     | 可以为空 |
| pagenum  | 当前页码     | 不能为空 |
| pagesize | 每页显示条数 | 不能为空 |

- 响应参数

| 参数名     | 参数说明         | 备注 |
| ---------- | ---------------- | ---- |
| total      | 总记录数         |      |
| pagenum    | 当前页码         |      |
| transports | 运输管理数据集合 |      |

- 响应数据

```json
{
    "data": {
        "total": 5,
        "pagenum": 1,
        "users": [
            {
                "username": "tige117",//用户名
                "name":"赵子恺"，//姓名
                "mobile": "18616358651",//电话
                "department":"策划部"//主属部门-这里的部门数据从部门管理中导入
                "position":"主管"//职位-这里的职位从权限管理中导入
                "positiondata":"2019.02.28"//入职日期
                "mg_state": true, // 当前用户的状态-用户状态关闭情况下无法登陆
                "id": 25,//选择id
                "type": 1,
                "create_time": "2017-11-09T20:36:26.000Z",
                "role_name": "炒鸡管理员"
            }
        ]
    },
    "meta": {
        "msg": "获取成功",
        "status": 200
    }
}
```
